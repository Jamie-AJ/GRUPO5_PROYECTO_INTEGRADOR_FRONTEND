<section class="listar">
  <div class="listar__content">
    <div class="inversion__nav">
      <div class="inversion__header">
        <h3>{{title}}</h3>
      </div>
      <div class="inversion__group">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" class="btn__save">
          <i class="bx bx-plus"></i>
          Agregar Inversi贸n
        </button>
      </div>
    </div>
    <app-tabs [tabs]="tabs" (onTabsChange)="tabsChange($event)"></app-tabs>
    <div class="inversion__box">
      <div class="inversion__content" *ngIf="activeTabsIndex === 0" >
        <div class="listar__content-table">
          <table class="listar__table">
            <thead class="listar__thead">
              <tr>
                <th>Fecha inversi贸n</th>
                <th>Deudor</th>
                <th>Inversi贸n</th>
                <th>Ganancia</th>
                <th>Retorno</th>
                <th>Estado</th>
                <th>Fecha Pago</th>
              </tr>
            </thead>
            <ng-container *ngIf="oportunidadesUsuario.length > 0; else noDataMessage" >
              <tbody class="listar__tbody">
                <tr *ngFor="let oporUsu of oportunidadesUsuario">
                  <td>{{oporUsu.fecha }}</td>
                  <td>
                    <span>{{oporUsu.empresa?.razonSocial}}</span>
                    <span class="badge" [ngClass]="getBadgeClassRango(oporUsu.empresa?.riesgo?.rango!)">{{oporUsu.empresa?.riesgo?.rango}}</span>
                  </td>
                  <td>{{oporUsu.montoInvertido | currency:'S/.&nbsp;':'symbol-narrow'}}</td>
                  <td>{{oporUsu.ganancia | currency:'S/.&nbsp;':'symbol-narrow'}}</td>
                  <td>{{oporUsu.oportunidadInversion?.rendimiento | percent}}</td>
                  <td>
                    <span class="badge" [ngClass]="getBadgeClass(oporUsu.estado!)">
                      {{oporUsu.estado}}
                    </span>
                  </td>
                  <td>{{oporUsu.oportunidadInversion?.fechaPago | date:'longDate':'':'es-PE'}}</td>
                  <!-- <td>{{oporUsu.fecha}}</td>    -->
                </tr>
              </tbody>
            </ng-container>
            <ng-template #noDataMessage>
              <div class="alert alert-info inversion__alert" role="alert">
                No hay ningun dato disponible.
              </div>
            </ng-template>
            
          </table>
        </div>
        
        <app-pagination *ngIf="pagination" [pagination]="pagination" urlBase="/dashboard/inversiones"></app-pagination>
      </div>
      
      <div class="inversion__content animate__animated animate__fadeIn animete_faster" *ngIf="activeTabsIndex === 1">
      </div>
    </div>
  </div>
</section>

<!-- Modal -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">
          Ingresar Inversi贸n
        </h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form class="form" id="form-tarjeta">
          <div class="form__content">
            <div class="form__box">
                <label for="titular">Monto</label>
                <input type="text" class="form__input" name="titular" id="titular">
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-success">Save changes</button>
      </div>
    </div>
  </div>
</div>
